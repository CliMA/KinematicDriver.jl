<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Simulation setups · KinematicDriver.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="KinematicDriver.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">KinematicDriver.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Simulation setups</a><ul class="internal"><li><a class="tocitem" href="#Box-model"><span>Box model</span></a></li><li><a class="tocitem" href="#KinematicDriver"><span>KinematicDriver</span></a></li><li><a class="tocitem" href="#Cloud-layer-simulations"><span>Cloud layer simulations</span></a></li><li><a class="tocitem" href="#Two-dimensional-system"><span>Two-dimensional system</span></a></li><li><a class="tocitem" href="#Changes-to-CliMA-defaults"><span>Changes to CliMA defaults</span></a></li></ul></li><li><a class="tocitem" href="../calibration_features/">Calibration features</a></li><li><a class="tocitem" href="../References/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Simulation setups</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Simulation setups</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/CliMA/KinematicDriver.jl/blob/main/docs/src/simulation_setups.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Simulation-setups"><a class="docs-heading-anchor" href="#Simulation-setups">Simulation setups</a><a id="Simulation-setups-1"></a><a class="docs-heading-anchor-permalink" href="#Simulation-setups" title="Permalink"></a></h1><h2 id="Box-model"><a class="docs-heading-anchor" href="#Box-model">Box model</a><a id="Box-model-1"></a><a class="docs-heading-anchor-permalink" href="#Box-model" title="Permalink"></a></h2><p>The Box Model simulation represents a zero-dimensional system that focuses on key processes within thermodynamics and collisional microphysics, designed to capture the dynamics of atmospheric particles under controlled conditions without spatial variation. This model is ideal for studying isolated processes in a simplified environment. It includes microphysical processes such as auto-conversion, which represents the transformation of cloud droplets into raindrops through collision and coalescence, and accretion, which models the capture of smaller cloud droplets by larger raindrops as they fall, crucial for understanding precipitation dynamics.</p><p>An example of running a box simulation is provided in the following file: <code>test/experiments/box_driver/run_box_simulation.jl</code>.</p><h2 id="KinematicDriver"><a class="docs-heading-anchor" href="#KinematicDriver">KinematicDriver</a><a id="KinematicDriver-1"></a><a class="docs-heading-anchor-permalink" href="#KinematicDriver" title="Permalink"></a></h2><p>The KinematicDriver setup is based on the kinematic framework introduced by <a href="../References/#KiD2012">[1]</a>: Vertical momentum flux is constant with height and varying in time. Density and temerature profiles are constant and defined by the initial   condition, which is unsaturated. As the simulation progresses in time moisture is transported upwards,   supersaturation grows in the upper part of the domain   and precipitation is formed. In the second part of the simulation the vertical momentum flux is switched off,   leaving only cloud microphysics tendencies acting to change   the model state. Below figure shows an example prescribed vertical momentum as a function of time.</p><pre><code class="language-julia hljs">using Plots
import KinematicDriver.K1DModel as K1D

t_range = range(0, 15 * 60, length=100)
w1 = 2.0
t1 = 600.0
plot(t_range / 60.0, [K1D.ρw_helper(t, w1, t1) for t in t_range], linewidth=3, xlabel=&quot;t [min]&quot;, ylabel=&quot;updraft momentum flux [m/s kg/m3]&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">&quot;/home/runner/work/KinematicDriver.jl/KinematicDriver.jl/docs/build/prescribed_momentum_flux.svg&quot;</code></pre><p><img src="../prescribed_momentum_flux.svg" alt/></p><p>An example of running a one-dimensional KiD simulation is provided in the following file: <code>test/experiments/KiD_driver/KiD_driver.jl</code>.</p><h2 id="Cloud-layer-simulations"><a class="docs-heading-anchor" href="#Cloud-layer-simulations">Cloud layer simulations</a><a id="Cloud-layer-simulations-1"></a><a class="docs-heading-anchor-permalink" href="#Cloud-layer-simulations" title="Permalink"></a></h2><p>Cloud Layer Simulations employ a one-dimensional setup to explore atmospheric processes, facilitating a detailed examination of the evolution and interactions within a cloud layer. Initially, the simulation initializes the atmospheric column with a uniform gamma distribution, classifying particles into liquid and rain categories. As the simulation progresses, it incorporates thermodynamics, collisional microphysics, and sedimentation. These elements work together to model the complex behaviors of cloud formation and precipitation. By accounting for the vertical distribution and movement of particles, this simulation offers insights into how processes such as auto-conversion, accretion, and sedimentation influence cloud dynamics and precipitation patterns.</p><p>An example of running a cloud layer simulation is provided in the following file: <code>test/experiments/KiD_col_sed_driver/run_KiD_col_sed_simulation.jl</code>.</p><h2 id="Two-dimensional-system"><a class="docs-heading-anchor" href="#Two-dimensional-system">Two-dimensional system</a><a id="Two-dimensional-system-1"></a><a class="docs-heading-anchor-permalink" href="#Two-dimensional-system" title="Permalink"></a></h2><p>The two-dimensional setup models the dynamics of an updraft and a downdraft in moist air, incorporating a range of atmospheric processes including thermodynamics, condensation, aerosol activation, collisional processes, and sedimentation of raindrops. These elements collectively simulate complex cloud and precipitation systems. The velocity profile, which varies across spatial dimensions <span>$x$</span>, <span>$z$</span> and over time <span>$t$</span>, is determined using the stream function <span>$\psi$</span>, defined as follows:</p><p class="math-container">\[\begin{align}
\psi(x, z) = - (\rho w)_0 \frac{W}{\pi} \sin\left(\frac{\pi z}{H}\right)\cos\left(\frac{2\pi x}{W}\right)
\end{align}\]</p><p>In this equation, <span>$W$</span> denotes the width of the domain, <span>$H$</span> represents the height of the domain, and <span>$(\rho w)_0$</span> is the updraft amplitude, varying over time according to the following equation:</p><p class="math-container">\[\begin{align}
(\rho w)_0 = \begin{cases} 
(\rho w)_{max} \sin\left(\frac{\pi t}{t_1}\right), &amp; \text{for } t &lt; t_1, \\
0, &amp; \text{for } t &gt; t_1, 
\end{cases}
\end{align}\]</p><p>where <span>$(\rho w)_{max}$</span> represents the maximum updraft amplitude. An example of running a two-dimensional simulation is provided in the following file: <code>test/experiments/Ki2D_driver/run_kinematic2d_simulation.jl</code>.</p><h2 id="Changes-to-CliMA-defaults"><a class="docs-heading-anchor" href="#Changes-to-CliMA-defaults">Changes to CliMA defaults</a><a id="Changes-to-CliMA-defaults-1"></a><a class="docs-heading-anchor-permalink" href="#Changes-to-CliMA-defaults" title="Permalink"></a></h2><p>One of the goals of KinematicDriver.jl   is to test against <a href="https://github.com/atmos-cloud-sim-uj/PySDM">PySDM</a>   and the particle-based implementation of the kinematic model available in   <a href="https://github.com/atmos-cloud-sim-uj/PySDM-examples">PySDM-examples</a>. As a result, some CliMA constants were changed from their default values to better match PySDM:</p><table><tr><th style="text-align: right">symbol</th><th style="text-align: right">definition</th><th style="text-align: right">units</th><th style="text-align: right">default value</th><th style="text-align: right">new value</th></tr><tr><td style="text-align: right">MSLP</td><td style="text-align: right">Mean sea level pressure</td><td style="text-align: right"><span>$Pa$</span></td><td style="text-align: right"><span>$101325$</span></td><td style="text-align: right"><span>$10^{5}$</span></td></tr><tr><td style="text-align: right">grav</td><td style="text-align: right">Gravitational acceleration</td><td style="text-align: right"><span>$m/s^2$</span></td><td style="text-align: right"><span>$9.81$</span></td><td style="text-align: right"><span>$9.80665$</span></td></tr><tr><td style="text-align: right">gas_constant</td><td style="text-align: right">Universal gas constant</td><td style="text-align: right"><span>$J/mol/K$</span></td><td style="text-align: right"><span>$8.3144598$</span></td><td style="text-align: right"><span>$8.314462618$</span></td></tr><tr><td style="text-align: right">kappa_d</td><td style="text-align: right">Adiabatic exponent for dry air (2/7)</td><td style="text-align: right"><span>$-$</span></td><td style="text-align: right"><span>$0.28571428571$</span></td><td style="text-align: right"><span>$0.2855747338575384$</span></td></tr><tr><td style="text-align: right">cp_v</td><td style="text-align: right">Isobaric specific heat of water vapor</td><td style="text-align: right"><span>$J/kg/K$</span></td><td style="text-align: right"><span>$1859$</span></td><td style="text-align: right"><span>$1850$</span></td></tr><tr><td style="text-align: right">molmass_dryair</td><td style="text-align: right">Molecular mass of dry air</td><td style="text-align: right"><span>$kg/mol$</span></td><td style="text-align: right"><span>$0.02897$</span></td><td style="text-align: right"><span>$0.02896998$</span></td></tr><tr><td style="text-align: right">molmass_water</td><td style="text-align: right">Molecular mass of water</td><td style="text-align: right"><span>$kg/mol$</span></td><td style="text-align: right"><span>$0.01801528$</span></td><td style="text-align: right"><span>$0.018015$</span></td></tr><tr><td style="text-align: right">q<em>liq</em>threshold</td><td style="text-align: right">Cloud liquid water autoconversion threshold</td><td style="text-align: right"><span>$kg/kg$</span></td><td style="text-align: right"><span>$0.0005$</span></td><td style="text-align: right"><span>$0.0001$</span></td></tr></table></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../calibration_features/">Calibration features »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Wednesday 22 May 2024 19:16">Wednesday 22 May 2024</span>. Using Julia version 1.10.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
